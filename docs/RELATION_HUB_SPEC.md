# 다점(branch) 관계 렌더링 스펙 (Organic Ribbon)

## 목적
- 3개 이상의 락커가 하나의 연결 중점에서 퍼져나가는 **유기적인 가지형 구조(Organic Branch)**를 표현한다.
- 기존의 기계적인 직선/다각형 연결 대신, **베지에 곡선(Bezier Curve)**을 사용하여 중앙에서 자연스럽게 뻗어나가는 형태를 구현한다.
- 중앙에 별도의 원형 도형을 두지 않고, 각 가지(Ribbon)들이 중앙점(Anchor)에서 자연스럽게 융합되도록 한다.

## 데이터 계약
`data/relationHubs.json` 파일에 다점 허브를 정의한다. (기존과 동일)

```json
{
  "id": "river-culture-hub",
  "label": "라인강 협력 라운지",
  "members": ["arnhem-museum", "depot-boijmans", "museum-arnhem"],
  "offset": { "x": 0, "y": -30 },
  "layoutOffsets": [
    { "layout": "map", "offset": { "x": 18, "y": -24 } }
  ],
  "info": { ... } // 선택적 허브 정보
}
```

## 렌더링 요구사항

### 1. 유기적 리본 (Organic Ribbon)
- **형태**: 각 멤버 락커에서 중앙 허브(Anchor)로 이어지는 경로는 **베지에 곡선**을 기반으로 생성한다.
- **면(Fill) 렌더링**: 단순한 선(Stroke)이 아닌, 색상이 채워진 **면(Fill)** 형태로 렌더링하여 1:1 연결과 시각적 통일성을 유지한다.
- **폭(Width)**: 리본의 폭은 락커 연결부에서 중앙부까지 **최대한 일정하게 유지**한다. (나팔 모양이나 급격한 좁아짐 지양)

### 2. 연결 지점 (Connection Points)
- **락커 접합부**: 1:1 연결과 동일한 로직(`getEdgeSegment`)을 사용하여, 락커의 한 변(두 꼭짓점)을 정확히 타겟팅한다. 이를 통해 락커 모서리와 리본이 빈틈없이 맞닿도록 한다.
- **중앙 접합부 (Anchor)**:
    - 모든 가지는 계산된 중앙점(Anchor)으로 모인다.
    - 중앙에 별도의 시각적 원형 도형(`circle`)을 렌더링하지 않는다.
    - 대신, 여러 리본이 중앙점에서 겹쳐지며 자연스럽게 하나의 덩어리로 융합된 형태를 이룬다.

### 3. 레이어 및 순서
- 리본들은 중앙에서 서로 겹쳐지게 배치하여, 끊김 없는 연결성을 표현한다.

## 상호작용 (Interaction)

### 1. 통합된 호버 효과 (Unified Hover)
- **동작**: 사용자가 특정 가지(Branch)에 마우스를 올리면(Hover), 해당 가지의 **전체 경로(락커~중앙)**가 활성화된다.
- **시각 효과**:
    - 중앙 깊은 곳에서부터 락커 쪽으로 색상이 차오르거나, 전체가 동시에 강조되는 효과를 적용한다.
    - 가지가 끊어져 보이지 않도록 중앙 접합부까지 포함하여 스타일을 변경한다.

### 2. 허브 정보 접근
- **히트 존(Hit Zone)**: 시각적인 원은 없으나, 중앙 교차점 부근에 투명한 히트 존을 유지하거나, 가지들이 겹친 중앙 영역을 통해 허브 정보(`info`)에 접근할 수 있도록 한다.
- **클릭 동작**:
    - 가지 클릭: 해당 관계(허브-멤버)에 대한 라벨/정보 표시.
    - 중앙(융합부) 클릭: 허브 전체 정보(`info`) 표시 (데이터가 있는 경우).

## 구현 가이드
- `RelationsLayer.tsx` 수정:
    - 기존 `polygon` 및 `mergedPath` (복잡한 arc 로직) 제거.
    - `path` 요소를 사용하여 베지에 곡선 데이터(`d` 속성) 생성 로직 구현.
    - 락커의 두 점(p1, p2)과 중앙의 점(anchor)을 잇는 곡선 경로 계산.
    - 예: `M p1 C cp1 anchor, cp2 anchor ... L anchor ... L p2 ... Z` 형태의 닫힌 패스 생성.
